a=[]#создание массива
def f(n):  #запуск функции
    s='' #создание переменной
    while n>0: #запуск цикла для преобразования числа в пятеричную систему
        s+=str(n%5) 
        n//=5
    return s[::-1] #возвращение перевернутой записи числа для дачи верного результата перевода
def f1(n): #функция для перевода числа в троичную систему счисления
    s=''
    while n>0:
        s+=str(n%3)
        n//=3
    return s[::-1]

for n in range(1,1000): #Запуск цикла
    n2=f(n) #П.1 присваивание переменной n2 результат функции
    if int((str(n))[-1])%2==0: #П.2 проверка последней цифры числа на четность
        n2='1'+n2+'1' #выполнение условия
    else:
        n2=f1(n%5)+n2[:-1] #иначе: выполнение другого условия
    r=int(n2,5) #П.3 Переводим полученный результат в десятичную запись
    if r<=4167 and r>3945: 
        a+=[n] #добавление числа в массив при выполнении условия
print(min(a)) #вывод минимального числа из массива

#Ответ 164
